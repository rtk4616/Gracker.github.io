<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="Gracker" />



<meta name="description" content="原文地址：https://medium.com/@duhroach/how-png-works-f1174e3cc7b7#.b923t7n34原文作者：Colt McAnlis
How PNG WorksThe Portable Network Graphics (PNG) has become a staple for App development over the past few dec">
<meta property="og:type" content="article">
<meta property="og:title" content="How PNG Works">
<meta property="og:url" content="http://androidperformance.com/2016/04/07/how-png-works.html">
<meta property="og:site_name" content="Performance">
<meta property="og:description" content="原文地址：https://medium.com/@duhroach/how-png-works-f1174e3cc7b7#.b923t7n34原文作者：Colt McAnlis
How PNG WorksThe Portable Network Graphics (PNG) has become a staple for App development over the past few dec">
<meta property="og:image" content="http://androidperformance.com/images/media/14600331177923.jpg">
<meta property="og:image" content="http://androidperformance.com/images/media/14600331929796.jpg">
<meta property="og:image" content="http://androidperformance.com/images/media/14600332058049.jpg">
<meta property="og:image" content="http://androidperformance.com/images/media/14600333696105.jpg">
<meta property="og:image" content="http://androidperformance.com/images/media/14600334859301.jpg">
<meta property="og:image" content="http://androidperformance.com/images/media/14600335437808.jpg">
<meta property="og:image" content="http://androidperformance.com/images/media/14600330550488.jpg">
<meta property="og:updated_time" content="2016-05-23T01:54:42.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How PNG Works">
<meta name="twitter:description" content="原文地址：https://medium.com/@duhroach/how-png-works-f1174e3cc7b7#.b923t7n34原文作者：Colt McAnlis
How PNG WorksThe Portable Network Graphics (PNG) has become a staple for App development over the past few dec">
<meta name="twitter:image" content="http://androidperformance.com/images/media/14600331177923.jpg">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="Performance" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/favicon.png">





    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>How PNG Works | Performance</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: false,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/favicon.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">Gracker</a></h1>
        </hgroup>

        
        <p class="header-subtitle">True mastery of any skill takes a lifetime</p>
        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/随笔">随笔</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa 新浪微博" href="http://weibo.com/gracker520" title="新浪微博"></a>
                            
                                <a class="fa GitHub" href="https://github.com/Gracker" title="GitHub"></a>
                            
                                <a class="fa 简书" href="http://www.jianshu.com/users/FK4sc4/latest_articles" title="简书"></a>
                            
                                <a class="fa 知乎" href="http://www.zhihu.com/people/gracker" title="知乎"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Email" href="/dreamtale.jg@gmail.com" title="Email"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DelayLoad/">DelayLoad</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HashMap/">HashMap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MAT/">MAT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Menory/">Menory</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nexus/">Nexus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Performance/">Performance</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RenderThread/">RenderThread</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Singleton/">Singleton</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hwui/">hwui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/启动优化/">启动优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计规范/">设计规范</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">Gracker</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/favicon.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">Gracker</a></h1>
            </hgroup>
            
            <p class="header-subtitle">True mastery of any skill takes a lifetime</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/随笔">随笔</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa 新浪微博" target="_blank" href="http://weibo.com/gracker520" title="新浪微博"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/Gracker" title="GitHub"></a>
                            
                                <a class="fa 简书" target="_blank" href="http://www.jianshu.com/users/FK4sc4/latest_articles" title="简书"></a>
                            
                                <a class="fa 知乎" target="_blank" href="http://www.zhihu.com/people/gracker" title="知乎"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa Email" target="_blank" href="/dreamtale.jg@gmail.com" title="Email"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap"><article id="post-how-png-works" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/07/how-png-works.html" class="article-date">
      <time datetime="2016-04-07T12:36:34.000Z" itemprop="datePublished">2016-04-07</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      How PNG Works
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p><img src="/images/media/14600331177923.jpg" alt=""></p>
<p>原文地址：<a href="https://medium.com/@duhroach/how-png-works-f1174e3cc7b7#.b923t7n34" target="_blank" rel="external">https://medium.com/@duhroach/how-png-works-f1174e3cc7b7#.b923t7n34</a><br>原文作者：<a href="https://medium.com/@duhroach" target="_blank" rel="external">Colt McAnlis</a></p>
<h1 id="How-PNG-Works"><a href="#How-PNG-Works" class="headerlink" title="How PNG Works"></a>How PNG Works</h1><p>The Portable Network Graphics (PNG) has become a staple for App development over the past few decades. It’s creeped up everywhere from game development, to web development, and Android development, which means that it’s widely adopted, but also has the opportunity to be widely abused.</p>
<p>And as I’ve discussed before, PNG provides a nice, high resolution image format, but that means that there’s lots of room for improvement for data compression. But before we can start talking about how to compress PNG files further, we have to first talk about how the format works.</p>
<h1 id="Understanding-the-Compression"><a href="#Understanding-the-Compression" class="headerlink" title="Understanding the Compression"></a>Understanding the Compression</h1><p>PNG’s compression process is entirely lossless; meaning that the compressed file can reconstruct the source image exactly. Done in two stages: Prediction (aka filtering) and then Compression.</p>
<a id="more"></a>
<h2 id="1-Filtering-prediction"><a href="#1-Filtering-prediction" class="headerlink" title="1 Filtering (prediction)"></a>1 Filtering (prediction)</h2><p>Delta encoding is one of the most powerful numeric compression methods out there. The basic idea is that you can represent any value as a difference from the previous value. So,</p>
<p>[2,3,4,5,6,7,8] can become [2,1,1,1,1,1,1], where<br>[2, 3–2=1, 4–3=1, 5–4=1, 6–5=1, 7–6=1, 8–7=1]</p>
<p>The reason this is so powerful, is that if the data is linearly correlated (that is, value has some low-difference from the previous value) then you end up transforming values of your dataset into lots of duplicate, low values, which are more compressible.</p>
<p>The PNG format makes use of delta encoding in a format that it calls “filtering”. Basically, for each scan-line of pixels, a current pixel is encoded in some relation to the pixel to the left, the pixel above, and the pixel above-left.</p>
<p><img src="/images/media/14600331929796.jpg" alt=""></p>
<p>For example if we encoded a given pixel by listing its difference between the average of A and B (X-((A+B)/2)then we’d get:</p>
<p><img src="/images/media/14600332058049.jpg" alt=""></p>
<p>The filtering takes ABC, and uses that to predict what the value of x is. The value that we replace x with, is the difference between the prediction, and the actual value.</p>
<p>Now, it’s worth noting that each line may be a little different, which is why PNG allows 1 of 5 different modes to be chosen, per line:</p>
<ul>
<li>No filtering</li>
<li>Difference between X and A</li>
<li>Difference between X and B</li>
<li>Difference between X and (A + B)/2 (aka average)</li>
<li>Paeth predictor (linear function of A,B,C)</li>
</ul>
<p>The intention here, is that each line can choose the best filtering method, for itself, such that it can produce the lowest number of unique symbols. Here’s our original example with each mode:</p>
<p><img src="/images/media/14600333696105.jpg" alt="An example of applying filtering to two rows of pixel values. The impacted pixels are highlighted in blue."></p>
<p>An example of applying filtering to two rows of pixel values. The impacted pixels are highlighted in blue.<br>And, it’s important to note that these filters are done, per channel not per-pixel. Meaning that the filter is applied to all the red values of a pixel for a scanline, and then separately for all the blue values for a scanline (although all the colors in a row will use the same filter).</p>
<p>And the PNG format has some nifty ways to pick which filter to use on a channel; While brute force is the most direct, it’s simply right out. Instead, the developers experimented on different image types and came up with some rules of thumb, that are close to optimal; like use None filters for palette images, and sub-8 bit grayscale images. And for the other images, choose the filter that minimizes the sum of absolute differences; Rather than using modulo-256, instead to standard signed math, then take the abs value, and add them all together for a given row, and compare the sums for the other filter types. Choose the filter that gives the smallest sum.</p>
<h2 id="2-Compression-DEFLATE"><a href="#2-Compression-DEFLATE" class="headerlink" title="2 Compression (DEFLATE)"></a>2 Compression (DEFLATE)</h2><p>Once filtering has occurred on a scan-line, it’s passed off to a descendant of the LZ77 algorithm, known as DEFLATE; This algorithm combines LZ77 coding alongside a Huffman coder. Which is almost identical to compressors like PKWARE, PKZIP, GZip etc. The implementation is out-of-the-box standard, but has some interesting caveats when it comes to image data.</p>
<ol>
<li>Deflate limits match lengths between 3 and 258 symbols; which puts the maximum conceivable compression ratio around 1032:1.</li>
<li>If the match is less than 3 symbols, then you incur some overhead to represent the symbol</li>
</ol>
<p>The result of these two, means that the size of your image can have an impact in if matches are found in a scanline.</p>
<p>Consider this image below, The 270x90 version is only 20k, however the 270x92 version is 2x larger.</p>
<p><img src="/images/media/14600334859301.jpg" alt=""></p>
<p>Logically this seems wrong. Adding 540 pixels to an image shouldn’t cause a 2x bloat in compression. However when we look a little closer, we can see why this is occurring; The following heat map of the images represents how compressed a given pixel is. Deep blue = very compressed, yellow/red = not very compressed</p>
<p><img src="/images/media/14600335437808.jpg" alt=""></p>
<p>What’s occurring here, is that in the smaller image, there’s more matches in the scanlines, and thus there’s better compression. However, adjusting the size, slightly, changes the type of matching that can occur; some potential candidates for matching are now outside of our LZ window, and thus aren’t matched, resulting in a larger file.</p>
<p>If you’re looking to see how well your own images compressed with PNG, check out PNGThermal.</p>
<h1 id="Understanding-the-format"><a href="#Understanding-the-format" class="headerlink" title="Understanding the format"></a>Understanding the format</h1><p>Now, it’s worth noting that PNG is more than just the filtering &amp; compression stages. It’s a pretty extensible container format, that can support all sorts of image types and added data.</p>
<p>Let’s first start with the fact that the PNG file format can support a series of chunks inside of it which can include various types of data. For example, you’ve got the PNG Header chunk which contains simple information about the image like width, height, bit depth &amp; color-type.</p>
<p>The Image data chunk contains the actual image information itself (oh, and note, this information can exist in multiple chunks). Then for color paletted images, there’s a separate chunk for that.</p>
<p>And finally an end-of-file chunk. And those are the main chunks, but there’s also a whole slew of other chunks like:</p>
<ul>
<li>Default background color</li>
<li>Chroma coordinates on how to display white-points</li>
<li>Gamma spec</li>
<li>Histogram info</li>
<li>Text data, with language or Metadata info</li>
<li>Color space information</li>
<li>Stereo-image data</li>
<li>A chunk which notes the last time the file was changed</li>
<li>And Transparency data.</li>
</ul>
<p>Now, these chunks are where you need to watch out, because lots of junk gets put in there by your photo editing app. For example, saving a PNG file from Photoshop results in a chunk that says “this image was made in photoshop.” That chunk has nothing to do with the visible pixel data, but yet it’s included in the file itself. As such, REMOVING useless chunks is critical to ensuring small file sizes. The image below shows you a 16x16 pixel image, saved from Photoshop as a regular PNG, and the other-one, using the “export to web” option of photoshop, which removes all the gobbledygook.</p>
<p><img src="/images/media/14600330550488.jpg" alt="The left image was saved regularly through Photoshop, the right image was saved via “export to web.” the difference in sizes comes from removal of meta data from the file."></p>
<h1 id="Pixel-format"><a href="#Pixel-format" class="headerlink" title="Pixel format"></a>Pixel format</h1><p>The PNG format can ALSO support various types of pixel formats so you can create an optimal</p>
<p>Indexed = 1 channel, can be 1,2,4,8 bpc</p>
<p>Grayscale = 1 channel, can be 1,2,4,8,16 bpc</p>
<p>Gray+Alpha = 2 channel, can be 8 or 16 bpc</p>
<p>Truecolor(RGB) = 3 channel, can be 8 or 16 bpc</p>
<p>RGBA = 4 channel, can be 8 or 16 bpc</p>
<p>Pixel formats are selected by the author of the image file. So it’s not too interesting to discuss, other than making sure you’ve chosen the right pixel format; Storing a greyscale image as a truecolor w/ alpha, is a bad idea.</p>
<h1 id="Story-GIF-and-the-birth-of-PNG"><a href="#Story-GIF-and-the-birth-of-PNG" class="headerlink" title="Story : GIF and the birth of PNG"></a>Story : GIF and the birth of PNG</h1><p>When it comes to the relentless bulk of web content, images are by far the largest load bearer today (although there’s an argument to be made that videos have become king as of late).</p>
<p>But what’s truly interesting is that as much as compression information can help solve some of the congestion, there’s a massive amount of human problems that keep compression from making its way into everyone’s hands.</p>
<p>Let’s take a trip back to 1985, when Unisys filed a patent for the LZW compression algorithm, nothing too interesting at the time. A few years later, when CompuServe invented the 89a format (which later became the GIF format), they used LZW as its backbone, not realizing that it was a patented. Unisys didn’t care about this until 1993, when the Netscape browser added support for the IMG HTML tag, alongside with support for the 89a format. Within a year, animated images became all the craze on the internet, and Unisys started enforcing its patent. CompuServe and Unisys eventually reached a court agreement in December of 1994, announcing that Unisys would start collecting royalties from all software that used the 89a graphics format. In the months following this decision, a group of engineers developed an entirely new, patent-free format known as the Portable Network Graphics or PNG format.</p>
<p>In 2004, the patent on LZW finally expired, but for a whole decade, the GIF/PNG image format debate was a hot one among internet folks.</p>
<h1 id="In-closing"><a href="#In-closing" class="headerlink" title="In closing"></a>In closing</h1><p>PNG is a very flexible and powerful image format type that’s become popular on the web due to it’s ability to support transparency. But it’s not right for <em>every</em> situation; Basically, make sure you’re using the best tool for the job. If your image is photographic and absolute losslessness is not required, then JPG or an equivalent lossy method would be more efficient than any lossless approach. On the other hand If you need a smaller bit-format, or need transparency, than PNG would be a dominant win over JPG.</p>
<p>And if you’re interested in seeing the most bare-bones implementation of a PNG coder, check out this awesome gist, which packs the whole thing into ~40 lines of code.</p>
<p>Of course, then there’s WebP, which will give you both.. But that’s another video ;)<br>CompressionAndroidPerformance<br>69</p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2016/04/07/how-png-works.html">How PNG Works</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">Gracker</a></p>
        <p><span>发布时间:</span>2016-04-07, 20:36:34</p>
        <p><span>最后更新:</span>2016-05-23, 09:54:42</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2016/04/07/how-png-works.html" title="How PNG Works">http://androidperformance.com/2016/04/07/how-png-works.html</a>
            <span class="copy-path" data-clipboard-text="原文: http://androidperformance.com/2016/04/07/how-png-works.html　　作者: Gracker" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2016/04/19/Avoiding-cold-starts-on-Android.html">
                    Avoiding cold starts on Android
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2016/04/05/android-bottom-bar-2.html">
                    Android Bottom navigation 规范二：样式、行为与规格
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#How-PNG-Works"><span class="toc-number">1.</span> <span class="toc-text">How PNG Works</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Understanding-the-Compression"><span class="toc-number">2.</span> <span class="toc-text">Understanding the Compression</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Filtering-prediction"><span class="toc-number">2.1.</span> <span class="toc-text">1 Filtering (prediction)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Compression-DEFLATE"><span class="toc-number">2.2.</span> <span class="toc-text">2 Compression (DEFLATE)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Understanding-the-format"><span class="toc-number">3.</span> <span class="toc-text">Understanding the format</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Pixel-format"><span class="toc-number">4.</span> <span class="toc-text">Pixel format</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Story-GIF-and-the-birth-of-PNG"><span class="toc-number">5.</span> <span class="toc-text">Story : GIF and the birth of PNG</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#In-closing"><span class="toc-number">6.</span> <span class="toc-text">In closing</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"How PNG Works　| Performance　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
      <div class="duoshuo" id="comments">
    <div id="comment-box" ></div>
    <div class="ds-thread" id="ds-thread" data-thread-key="2016/04/07/how-png-works.html" data-title="How PNG Works" data-url="http://androidperformance.com/2016/04/07/how-png-works.html"></div>
    <script>
        var duoshuoQuery = {short_name:"grackertalk"};
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            s.async = true; s.charset = 'UTF-8';
            (d.head || d.body).appendChild(s);
        }

        
    </script>
    
    <script> loadComment(); </script>

</div>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2016/04/19/Avoiding-cold-starts-on-Android.html" title="上一篇: Avoiding cold starts on Android">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2016/04/05/android-bottom-bar-2.html" title="下一篇: Android Bottom navigation 规范二：样式、行为与规格">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/04/19/Avoiding-cold-starts-on-Android.html">Avoiding cold starts on Android</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/07/how-png-works.html">How PNG Works</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/05/android-bottom-bar-2.html">Android Bottom navigation 规范二：样式、行为与规格</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/04/05/android-bottom-bar-1.html">Android Bottom navigation 规范一：使用方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/31/How-to-calculation-android-app-lunch-time.html">Android 中如何计算 App 的启动时间？</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/12/29/Android应用启动优化-一种DelayLoad的实现和原理-下篇.html">Android应用启动优化:一种DelayLoad的实现和原理(下篇)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/18/Android-app-lunch-optimize-delay-load.html">Android应用启动优化:一种DelayLoad的实现和原理(上篇)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/12/AndroidL-hwui-RenderThread-workflow.html">Android5.0中 hwui 中 RenderThread 工作流程</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/05/HashMap.html">HashMap源码分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/20/Android-Performance-Memory-onTrimMemory.html">Android代码内存优化建议-OnTrimMemory优化</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/20/Android-Performance-Memory-AndroidResource.html">Android代码内存优化建议-Android资源篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/20/Android-Performance-Memory-Google.html">Android代码内存优化建议-Android官方篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/20/Android-Performance-Memory-Java.html">Android代码内存优化建议-Java官方篇</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/05/29/Nexus6-with-Android-M.html">Nexus6 with Android M开启多窗口模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/05/06/Java-Singleton.html">细说Java单例模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/19/Android-Performance-Patterns-4.html">Android性能优化典范之Profile GPU Rendering</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/19/Android-Performance-Patterns-3.html">Android性能优化典范之Understanding VSYNC</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/19/Android-Performance-Patterns-2.html">Android性能优化典范之Understanding Overdraw</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/19/Android-Performance-Patterns-1.html">Android性能优化典范之Render Performance</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/19/Android-Performance-Patterns.html">Android性能优化典范综述</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/11/AndroidMemory-Open-Bitmap-Object-In-MAT.html">Android内存优化之三：打开MAT中的Bitmap原图</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/11/AndroidMemory-Usage-Of-MAT-Pro.html">Android内存优化之二：MAT使用进阶</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/04/11/AndroidMemory-Usage-Of-MAT.html">Android内存优化之一：MAT使用入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/03/31/android-performance-case-study-follow-up.html">Android性能优化后续</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/03/15/android-tips-round-up-5.html">[译]Android小技巧(5)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/03/15/android-tips-round-up-4.html">[译]Android小技巧(4)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/03/15/android-tips-round-up-3.html">[译]Android小技巧(3)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/02/04/build-rom-for-nexus5.html">为Nexus5编译AndroidL固件</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/30/android-performance-tools-systrace-1.html">Android性能优化之Systrace工具介绍(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/16/view-android-source-code-with-androidstudio.html">使用Android Studio查看Android Lollipop源码</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/13/android-performance-optimization-overdraw-2.html">Android性能优化之过渡绘制( 二)</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/10/20/android-performance-optimization-overdraw-1.html">Android性能优化之过渡绘制(一)</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/06/03/android-edittext-do-not-auto-get-focus.html">[Android小技巧]:如何让EditText不自动获取焦点</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/06/01/android-frame-animation.html">Android Frame animation模拟脉搏跳动小动画</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/05/31/android-tips-round-up-2.html">[译]Android小技巧(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/05/28/android-tips-round-up-1.html">[译]Android小技巧(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/05/17/apps-can-no-android4-4-app-longer-write-files-to-your-sd-card.html">[Android4.4]第三方APP无法操作外置SD卡原因分析以及延伸阅读</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/05/14/android4-4permission-denial-not-allowed-to-send-broadcast-android-intent-action-media-mounted.html">[Android4.4]Permission Denial: not allowed to send broadcast android.intent.action.MEDIA_MOUNTED</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/05/02/android_log_to_file.html">Android开发:Log2File工具类</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/04/01/android-service-build-your-own-notification-servers-app.html">Android Service：开发自己的通知中心(2):辅助性服务实战</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/03/25/ubuntu-adb-can-not-find-devices.html">Android:Ubuntu下执行Adb命令找不到设备</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/03/17/android-build-your-own-android-notification-service-app.html">Android Service：开发自己的通知中心(1):辅助性服务介绍</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2013-2016 Gracker
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
    <script src="/js/GithubRepoWidget.js"></script>

<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-50993302-2', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
             github: ".github-widget a", 
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>